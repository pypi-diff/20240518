# Comparing `tmp/odoo13_addon_account_bank_statement_import_online_paypal-13.0.1.0.2-py3-none-any.whl.zip` & `tmp/odoo13_addon_account_bank_statement_import_online_paypal-13.0.1.0.3-py3-none-any.whl.zip`

## zipinfo {}

```diff
@@ -1,22 +1,22 @@
-Zip file size: 38197 bytes, number of entries: 20
--rw-r--r--  2.0 unx     5715 b- defN 23-Dec-26 14:34 odoo/addons/account_bank_statement_import_online_paypal/README.rst
--rw-r--r--  2.0 unx       87 b- defN 23-Dec-26 14:33 odoo/addons/account_bank_statement_import_online_paypal/__init__.py
--rw-r--r--  2.0 unx      686 b- defN 23-Dec-26 14:34 odoo/addons/account_bank_statement_import_online_paypal/__manifest__.py
--rw-r--r--  2.0 unx    37173 b- defN 23-Dec-26 14:34 odoo/addons/account_bank_statement_import_online_paypal/i18n/account_bank_statement_import_online_paypal.pot
--rw-r--r--  2.0 unx      118 b- defN 23-Dec-26 14:33 odoo/addons/account_bank_statement_import_online_paypal/models/__init__.py
--rw-r--r--  2.0 unx    21719 b- defN 23-Dec-26 14:34 odoo/addons/account_bank_statement_import_online_paypal/models/online_bank_statement_provider_paypal.py
--rw-r--r--  2.0 unx     1154 b- defN 23-Dec-26 14:33 odoo/addons/account_bank_statement_import_online_paypal/readme/CONFIGURE.rst
--rw-r--r--  2.0 unx       92 b- defN 23-Dec-26 14:33 odoo/addons/account_bank_statement_import_online_paypal/readme/CONTRIBUTORS.rst
--rw-r--r--  2.0 unx       87 b- defN 23-Dec-26 14:33 odoo/addons/account_bank_statement_import_online_paypal/readme/DESCRIPTION.rst
--rw-r--r--  2.0 unx      831 b- defN 23-Dec-26 14:33 odoo/addons/account_bank_statement_import_online_paypal/readme/ROADMAP.rst
--rw-r--r--  2.0 unx      224 b- defN 23-Dec-26 14:33 odoo/addons/account_bank_statement_import_online_paypal/readme/USAGE.rst
--rw-r--r--  2.0 unx     9455 b- defN 23-Dec-26 14:33 odoo/addons/account_bank_statement_import_online_paypal/static/description/icon.png
--rw-r--r--  2.0 unx    16358 b- defN 23-Dec-26 14:34 odoo/addons/account_bank_statement_import_online_paypal/static/description/index.html
--rw-r--r--  2.0 unx      129 b- defN 23-Dec-26 14:33 odoo/addons/account_bank_statement_import_online_paypal/tests/__init__.py
--rw-r--r--  2.0 unx    25741 b- defN 23-Dec-26 14:33 odoo/addons/account_bank_statement_import_online_paypal/tests/test_account_bank_statement_import_online_paypal.py
--rw-r--r--  2.0 unx     1620 b- defN 23-Dec-26 14:33 odoo/addons/account_bank_statement_import_online_paypal/views/online_bank_statement_provider.xml
--rw-r--r--  2.0 unx     6368 b- defN 23-Dec-26 14:34 odoo13_addon_account_bank_statement_import_online_paypal-13.0.1.0.2.dist-info/METADATA
--rw-r--r--  2.0 unx       92 b- defN 23-Dec-26 14:34 odoo13_addon_account_bank_statement_import_online_paypal-13.0.1.0.2.dist-info/WHEEL
--rw-r--r--  2.0 unx        5 b- defN 23-Dec-26 14:34 odoo13_addon_account_bank_statement_import_online_paypal-13.0.1.0.2.dist-info/top_level.txt
--rw-rw-r--  2.0 unx     2736 b- defN 23-Dec-26 14:34 odoo13_addon_account_bank_statement_import_online_paypal-13.0.1.0.2.dist-info/RECORD
-20 files, 130390 bytes uncompressed, 33331 bytes compressed:  74.4%
+Zip file size: 38505 bytes, number of entries: 20
+-rw-r--r--  2.0 unx     5715 b- defN 24-May-18 18:32 odoo/addons/account_bank_statement_import_online_paypal/README.rst
+-rw-r--r--  2.0 unx       87 b- defN 24-May-18 18:31 odoo/addons/account_bank_statement_import_online_paypal/__init__.py
+-rw-r--r--  2.0 unx      686 b- defN 24-May-18 18:32 odoo/addons/account_bank_statement_import_online_paypal/__manifest__.py
+-rw-r--r--  2.0 unx    37173 b- defN 24-May-18 18:31 odoo/addons/account_bank_statement_import_online_paypal/i18n/account_bank_statement_import_online_paypal.pot
+-rw-r--r--  2.0 unx      118 b- defN 24-May-18 18:31 odoo/addons/account_bank_statement_import_online_paypal/models/__init__.py
+-rw-r--r--  2.0 unx    22407 b- defN 24-May-18 18:31 odoo/addons/account_bank_statement_import_online_paypal/models/online_bank_statement_provider_paypal.py
+-rw-r--r--  2.0 unx     1154 b- defN 24-May-18 18:31 odoo/addons/account_bank_statement_import_online_paypal/readme/CONFIGURE.rst
+-rw-r--r--  2.0 unx       92 b- defN 24-May-18 18:31 odoo/addons/account_bank_statement_import_online_paypal/readme/CONTRIBUTORS.rst
+-rw-r--r--  2.0 unx       87 b- defN 24-May-18 18:31 odoo/addons/account_bank_statement_import_online_paypal/readme/DESCRIPTION.rst
+-rw-r--r--  2.0 unx      831 b- defN 24-May-18 18:31 odoo/addons/account_bank_statement_import_online_paypal/readme/ROADMAP.rst
+-rw-r--r--  2.0 unx      224 b- defN 24-May-18 18:31 odoo/addons/account_bank_statement_import_online_paypal/readme/USAGE.rst
+-rw-r--r--  2.0 unx     9455 b- defN 24-May-18 18:31 odoo/addons/account_bank_statement_import_online_paypal/static/description/icon.png
+-rw-r--r--  2.0 unx    16358 b- defN 24-May-18 18:32 odoo/addons/account_bank_statement_import_online_paypal/static/description/index.html
+-rw-r--r--  2.0 unx      129 b- defN 24-May-18 18:31 odoo/addons/account_bank_statement_import_online_paypal/tests/__init__.py
+-rw-r--r--  2.0 unx    26365 b- defN 24-May-18 18:31 odoo/addons/account_bank_statement_import_online_paypal/tests/test_account_bank_statement_import_online_paypal.py
+-rw-r--r--  2.0 unx     1620 b- defN 24-May-18 18:31 odoo/addons/account_bank_statement_import_online_paypal/views/online_bank_statement_provider.xml
+-rw-r--r--  2.0 unx     6368 b- defN 24-May-18 18:32 odoo13_addon_account_bank_statement_import_online_paypal-13.0.1.0.3.dist-info/METADATA
+-rw-r--r--  2.0 unx       92 b- defN 24-May-18 18:32 odoo13_addon_account_bank_statement_import_online_paypal-13.0.1.0.3.dist-info/WHEEL
+-rw-r--r--  2.0 unx        5 b- defN 24-May-18 18:32 odoo13_addon_account_bank_statement_import_online_paypal-13.0.1.0.3.dist-info/top_level.txt
+-rw-rw-r--  2.0 unx     2736 b- defN 24-May-18 18:32 odoo13_addon_account_bank_statement_import_online_paypal-13.0.1.0.3.dist-info/RECORD
+20 files, 131702 bytes uncompressed, 33639 bytes compressed:  74.5%
```

## zipnote {}

```diff
@@ -42,20 +42,20 @@
 
 Filename: odoo/addons/account_bank_statement_import_online_paypal/tests/test_account_bank_statement_import_online_paypal.py
 Comment: 
 
 Filename: odoo/addons/account_bank_statement_import_online_paypal/views/online_bank_statement_provider.xml
 Comment: 
 
-Filename: odoo13_addon_account_bank_statement_import_online_paypal-13.0.1.0.2.dist-info/METADATA
+Filename: odoo13_addon_account_bank_statement_import_online_paypal-13.0.1.0.3.dist-info/METADATA
 Comment: 
 
-Filename: odoo13_addon_account_bank_statement_import_online_paypal-13.0.1.0.2.dist-info/WHEEL
+Filename: odoo13_addon_account_bank_statement_import_online_paypal-13.0.1.0.3.dist-info/WHEEL
 Comment: 
 
-Filename: odoo13_addon_account_bank_statement_import_online_paypal-13.0.1.0.2.dist-info/top_level.txt
+Filename: odoo13_addon_account_bank_statement_import_online_paypal-13.0.1.0.3.dist-info/top_level.txt
 Comment: 
 
-Filename: odoo13_addon_account_bank_statement_import_online_paypal-13.0.1.0.2.dist-info/RECORD
+Filename: odoo13_addon_account_bank_statement_import_online_paypal-13.0.1.0.3.dist-info/RECORD
 Comment: 
 
 Zip file comment:
```

## odoo/addons/account_bank_statement_import_online_paypal/README.rst

```diff
@@ -3,15 +3,15 @@
 ==================================
 
 .. 
    !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
    !! This file is generated by oca-gen-addon-readme !!
    !! changes will be overwritten.                   !!
    !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
-   !! source digest: sha256:a0eb4461c1aedf6e0303a1bb1ad1b453137cc6990754ebf69cddab48d41437b1
+   !! source digest: sha256:f042524324308d0e64f2fac9e2221de24da7da0f5ed771bb81c1d1e285e45040
    !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
 
 .. |badge1| image:: https://img.shields.io/badge/maturity-Beta-yellow.png
     :target: https://odoo-community.org/page/development-status
     :alt: Beta
 .. |badge2| image:: https://img.shields.io/badge/licence-AGPL--3-blue.png
     :target: http://www.gnu.org/licenses/agpl-3.0-standalone.html
```

## odoo/addons/account_bank_statement_import_online_paypal/__manifest__.py

```diff
@@ -1,14 +1,14 @@
 # Copyright 2019 Brainbean Apps (https://brainbeanapps.com)
 # Copyright 2020-2021 CorporateHub (https://corporatehub.eu)
 # License AGPL-3.0 or later (https://www.gnu.org/licenses/agpl).
 
 {
     "name": "Online Bank Statements: PayPal.com",
-    "version": "13.0.1.0.2",
+    "version": "13.0.1.0.3",
     "author": "CorporateHub, Odoo Community Association (OCA)",
     "maintainers": ["alexey-pelykh"],
     "website": "https://github.com/OCA/bank-statement-import",
     "license": "AGPL-3",
     "category": "Accounting",
     "summary": "Online bank statements for PayPal.com",
     "depends": ["account_bank_statement_import_online"],
```

## odoo/addons/account_bank_statement_import_online_paypal/models/online_bank_statement_provider_paypal.py

```diff
@@ -223,14 +223,17 @@
             )
         )
         lines = list(
             itertools.chain.from_iterable(
                 map(lambda x: self._paypal_transaction_to_lines(x), transactions)
             )
         )
+        # Make sure there are no duplicate unique_import_id's within a download.
+        # This way we still guard against importing twice the same data.
+        self._paypal_ensure_unique_import_ids(lines)
 
         first_transaction = transactions[0]
         first_transaction_id = first_transaction["transaction_info"]["transaction_id"]
         first_transaction_date = self._paypal_get_transaction_date(first_transaction)
         first_transaction = self._paypal_get_transaction(
             token, first_transaction_id, first_transaction_date
         )
@@ -319,14 +322,25 @@
                     "partner_name": "PayPal",
                     "unique_import_id": "%s-FEE" % unique_import_id,
                     "note": _("Transaction fee for %s") % note,
                 }
             ]
         return lines
 
+    def _paypal_ensure_unique_import_ids(self, lines):
+        """Check id's are unique within a list of lines."""
+        check_ids = {}
+        for line in lines:
+            unique_import_id = line["unique_import_id"]
+            counter = 0
+            if unique_import_id in check_ids:
+                counter = check_ids[unique_import_id] + 1
+                line["unique_import_id"] = "%s-%d" % (unique_import_id, counter)
+            check_ids[unique_import_id] = counter
+
     def _paypal_get_token(self):
         self.ensure_one()
         data = self._paypal_retrieve(
             (self.api_base or PAYPAL_API_BASE) + "/v1/oauth2/token",
             (self.username, self.password),
             data=urlencode({"grant_type": "client_credentials"}).encode("utf-8"),
         )
```

## odoo/addons/account_bank_statement_import_online_paypal/static/description/index.html

```diff
@@ -362,15 +362,15 @@
 <div class="document" id="online-bank-statements-paypal-com">
 <h1 class="title">Online Bank Statements: PayPal.com</h1>
 
 <!-- !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
 !! This file is generated by oca-gen-addon-readme !!
 !! changes will be overwritten.                   !!
 !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
-!! source digest: sha256:a0eb4461c1aedf6e0303a1bb1ad1b453137cc6990754ebf69cddab48d41437b1
+!! source digest: sha256:f042524324308d0e64f2fac9e2221de24da7da0f5ed771bb81c1d1e285e45040
 !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!! -->
 <p><a class="reference external image-reference" href="https://odoo-community.org/page/development-status"><img alt="Beta" src="https://img.shields.io/badge/maturity-Beta-yellow.png" /></a> <a class="reference external image-reference" href="http://www.gnu.org/licenses/agpl-3.0-standalone.html"><img alt="License: AGPL-3" src="https://img.shields.io/badge/licence-AGPL--3-blue.png" /></a> <a class="reference external image-reference" href="https://github.com/OCA/bank-statement-import/tree/13.0/account_bank_statement_import_online_paypal"><img alt="OCA/bank-statement-import" src="https://img.shields.io/badge/github-OCA%2Fbank--statement--import-lightgray.png?logo=github" /></a> <a class="reference external image-reference" href="https://translation.odoo-community.org/projects/bank-statement-import-13-0/bank-statement-import-13-0-account_bank_statement_import_online_paypal"><img alt="Translate me on Weblate" src="https://img.shields.io/badge/weblate-Translate%20me-F47D42.png" /></a> <a class="reference external image-reference" href="https://runboat.odoo-community.org/builds?repo=OCA/bank-statement-import&amp;target_branch=13.0"><img alt="Try me on Runboat" src="https://img.shields.io/badge/runboat-Try%20me-875A7B.png" /></a></p>
 <p>This module provides online bank statements from
 <a class="reference external" href="https://paypal.com/">PayPal.com</a>.</p>
 <p><strong>Table of contents</strong></p>
 <div class="contents local topic" id="contents">
 <ul class="simple">
```

## odoo/addons/account_bank_statement_import_online_paypal/tests/test_account_bank_statement_import_online_paypal.py

```diff
@@ -801,7 +801,20 @@
                 "amount": "1000.00",
                 "name": "Invoice 1",
                 "note": "1234567890: Payment for Invoice(s) 1",
                 "partner_name": "Acme, Inc.",
                 "unique_import_id": "1234567890-%s" % (self.today_timestamp,),
             },
         )
+
+    def test_ensure_unique(self):
+        lines = [
+            {"unique_import_id": "A", "name": "0 A key"},
+            {"unique_import_id": "A", "name": "1 A key 1"},
+            {"unique_import_id": "B", "name": "2 B key"},
+            {"unique_import_id": "A", "name": "3 A key 2"},
+        ]
+        self.OnlineBankStatementProvider._paypal_ensure_unique_import_ids(lines)
+        self.assertEqual(lines[0]["unique_import_id"], "A")
+        self.assertEqual(lines[1]["unique_import_id"], "A-1")
+        self.assertEqual(lines[2]["unique_import_id"], "B")
+        self.assertEqual(lines[3]["unique_import_id"], "A-2")
```

## Comparing `odoo13_addon_account_bank_statement_import_online_paypal-13.0.1.0.2.dist-info/METADATA` & `odoo13_addon_account_bank_statement_import_online_paypal-13.0.1.0.3.dist-info/METADATA`

 * *Files 1% similar despite different names*

```diff
@@ -1,10 +1,10 @@
 Metadata-Version: 2.1
 Name: odoo13-addon-account-bank-statement-import-online-paypal
-Version: 13.0.1.0.2
+Version: 13.0.1.0.3
 Summary: Online bank statements for PayPal.com
 Home-page: https://github.com/OCA/bank-statement-import
 Author: CorporateHub, Odoo Community Association (OCA)
 Author-email: support@odoo-community.org
 License: AGPL-3
 Platform: UNKNOWN
 Classifier: Programming Language :: Python
@@ -20,15 +20,15 @@
 ==================================
 
 .. 
    !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
    !! This file is generated by oca-gen-addon-readme !!
    !! changes will be overwritten.                   !!
    !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
-   !! source digest: sha256:a0eb4461c1aedf6e0303a1bb1ad1b453137cc6990754ebf69cddab48d41437b1
+   !! source digest: sha256:f042524324308d0e64f2fac9e2221de24da7da0f5ed771bb81c1d1e285e45040
    !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
 
 .. |badge1| image:: https://img.shields.io/badge/maturity-Beta-yellow.png
     :target: https://odoo-community.org/page/development-status
     :alt: Beta
 .. |badge2| image:: https://img.shields.io/badge/licence-AGPL--3-blue.png
     :target: http://www.gnu.org/licenses/agpl-3.0-standalone.html
```

## Comparing `odoo13_addon_account_bank_statement_import_online_paypal-13.0.1.0.2.dist-info/RECORD` & `odoo13_addon_account_bank_statement_import_online_paypal-13.0.1.0.3.dist-info/RECORD`

 * *Files 15% similar despite different names*

```diff
@@ -1,20 +1,20 @@
-odoo/addons/account_bank_statement_import_online_paypal/README.rst,sha256=P4ExDtMgpHs1YsUnB2_l69e4oS3G3I6nrBVLXHPfPFE,5715
+odoo/addons/account_bank_statement_import_online_paypal/README.rst,sha256=7sEQpYGbE-0qN60xQf8aYwu83PUE-NcGIuOBPnZ03fo,5715
 odoo/addons/account_bank_statement_import_online_paypal/__init__.py,sha256=eShEGRadAlxopoLqIQ4-N42FM7MWPSuBe0h_l1cXTPM,87
-odoo/addons/account_bank_statement_import_online_paypal/__manifest__.py,sha256=5GeI6uvw22eLGvmjPv7KiRaKRWuHoFWtvuMaJk3cU8w,686
+odoo/addons/account_bank_statement_import_online_paypal/__manifest__.py,sha256=Q2L2bHSECsUQoZQnadZJPN1KCASJD_nEsLE-DLZiPzw,686
 odoo/addons/account_bank_statement_import_online_paypal/i18n/account_bank_statement_import_online_paypal.pot,sha256=gtPuX0swySwSQ2BoDcpoDvJGUIxqClxeUCW0Hy_BK28,37173
 odoo/addons/account_bank_statement_import_online_paypal/models/__init__.py,sha256=YlcE88uXQixnJnBFEammxN845hn8VRwkwF1q_WwStUo,118
-odoo/addons/account_bank_statement_import_online_paypal/models/online_bank_statement_provider_paypal.py,sha256=rLVlDd7wwpgXGPvD8BDDtU5kA1pN-k2s7GUVhA6qe_c,21719
+odoo/addons/account_bank_statement_import_online_paypal/models/online_bank_statement_provider_paypal.py,sha256=27mZ26I-nPWAEeCIU5-BoJcxp5bTBoUtSnLAKDwq-jE,22407
 odoo/addons/account_bank_statement_import_online_paypal/readme/CONFIGURE.rst,sha256=j0ZDlVoq0YKo-wQt7XflmdyIMywWgkCxSRfL8r1yf4Q,1154
 odoo/addons/account_bank_statement_import_online_paypal/readme/CONTRIBUTORS.rst,sha256=NTZN7njwDTu_ytS0PoeAKMWjru3M_p4-jh7-VEmMakU,92
 odoo/addons/account_bank_statement_import_online_paypal/readme/DESCRIPTION.rst,sha256=4WCruPP-ky4pVUfUk4VeaiWgQh3NAH38xBZpeqya87I,87
 odoo/addons/account_bank_statement_import_online_paypal/readme/ROADMAP.rst,sha256=R2kpkgKULjkbN3NzM9IoHiG9-8Km0faM2n1l0hap0j0,831
 odoo/addons/account_bank_statement_import_online_paypal/readme/USAGE.rst,sha256=gB1_mQXkUr2JpiFfcLtioeXkSio7nOdm3WMb24ndiJ8,224
 odoo/addons/account_bank_statement_import_online_paypal/static/description/icon.png,sha256=6xBPJauaFOF0KDHfHgQopSc28kKvxMaeoQFQWZtfZDo,9455
-odoo/addons/account_bank_statement_import_online_paypal/static/description/index.html,sha256=mBlqygdzv3MMeoXHR8PuWqL1LktuzPvAAroMuXWJDH0,16358
+odoo/addons/account_bank_statement_import_online_paypal/static/description/index.html,sha256=5kfAOkEpO2TSnGvg5G2gY-M4VFrCe6DOk4ImEaeEDfg,16358
 odoo/addons/account_bank_statement_import_online_paypal/tests/__init__.py,sha256=iigkHOfpjmqF_mfq-tv1jAbxf_z8rLdIoTkyjkxw88E,129
-odoo/addons/account_bank_statement_import_online_paypal/tests/test_account_bank_statement_import_online_paypal.py,sha256=tv3_On1WlKHHRl_zx6ufkzqrytX2J5W8AQo5HyOTPYA,25741
+odoo/addons/account_bank_statement_import_online_paypal/tests/test_account_bank_statement_import_online_paypal.py,sha256=3wS14q_aOWCUhtp3gIMDNax0ceOAAONtSLP9cNL_Y3Y,26365
 odoo/addons/account_bank_statement_import_online_paypal/views/online_bank_statement_provider.xml,sha256=UCZOO0teRxJjhpolapYcIZ3HO_h0fh88szPbCjS7H6k,1620
-odoo13_addon_account_bank_statement_import_online_paypal-13.0.1.0.2.dist-info/METADATA,sha256=3xS0fjRw3JxeYDnvf4qs-1wRX_r3lJe2eiOvfLvMxsY,6368
-odoo13_addon_account_bank_statement_import_online_paypal-13.0.1.0.2.dist-info/WHEEL,sha256=oiQVh_5PnQM0E3gPdiz09WCNmwiHDMaGer_elqB3coM,92
-odoo13_addon_account_bank_statement_import_online_paypal-13.0.1.0.2.dist-info/top_level.txt,sha256=qBj40grFkGOfDZ2WDSw3y1RnDlgG0u8rP8pvGNdbz4w,5
-odoo13_addon_account_bank_statement_import_online_paypal-13.0.1.0.2.dist-info/RECORD,,
+odoo13_addon_account_bank_statement_import_online_paypal-13.0.1.0.3.dist-info/METADATA,sha256=SfpfdOkCNpSXUIOc75xn4ef4ccg9UjEU-WIDNETuu9o,6368
+odoo13_addon_account_bank_statement_import_online_paypal-13.0.1.0.3.dist-info/WHEEL,sha256=GJ7t_kWBFywbagK5eo9IoUwLW6oyOeTKmQ-9iHFVNxQ,92
+odoo13_addon_account_bank_statement_import_online_paypal-13.0.1.0.3.dist-info/top_level.txt,sha256=qBj40grFkGOfDZ2WDSw3y1RnDlgG0u8rP8pvGNdbz4w,5
+odoo13_addon_account_bank_statement_import_online_paypal-13.0.1.0.3.dist-info/RECORD,,
```

